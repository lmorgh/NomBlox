#################################################################################################
#                                                                                               #
#                                       TODO                                                    #
#                                                                                               #
#################################################################################################

 # - (Denizen) Disable chat when enter world tutorial, enable when exit world tutorial
 # - (Denizen) Vanish all players when enter tutorial, show players when exit tutorial
 
 
#################################################################################################
#                                                                                               #
#                                       USEFUL STUFF                                            #
#                                                                                               #
#################################################################################################

# mechanism: custom_name (poglej si uporabo, mogoče bi lahko to ponucal za različne drops)

#adjust <player> show_boss_bar:Hello

#komanda za vrnitev na določen step
  #/ex zap s@pehta_intro step:1
  
  #komanda za remove flag
  #/ex flag player (ime flag):!
  
  #kak preprečiš preverjanje skript, da ne loada predolgo
  #v tem primeru za nek flag stone monitor. če ga nima, sprazni queue
  #- if !<player.has_flag[stone_monitor]> { - queue clear }
  
  #način za preverjanje materialov v eventih (eg. on block break)
  # - if li@tall_grass|double_plant contains <context.material.name>
  # - if <c.material.name.contains_any[tall_grass|double_plant]>
  
  #Distance of playerja... mogoče kdaj prav pride
  #<player.location.distance[0,0,0,svet].horizontal>
  
  #Tag za player target WITHIN range
  #burn <player.target.within[6]> d:1
  
  #on player damages <material> 
  #determine INSTABREAK
  
  #preverim, če ma player določen item v inventoriju glede na lore
  #if <player.inventory.contains.lore[Makes<&sp>magic<&sp>happen].qty[1]>
  
  # RANDOM LORE
  #<li@one|two|three.random>
  
  # "on player clicks with item:" "- if li@stick|arrow|feather contains <player.item_in_hand.material.name> {"
  
  #interest find - STACKING MOBS (če odstranim player part, je RIDING)
  #- push <player.location.find.entities.within[5].exclude[<player>]> no-damage
  
  #Get first line of lore in hand as a definition.
  #define lore <player.item_in_hand.lore.get[1]>

  
  #ARGS STUFF
  #/give talamar1 pickles 42    args.get[0] = give, get[1] = talamar1 etc...
  
  # Nekaj o zamenjavi lora... verjetno ni ok, but still
  #foreach li@1|2|3|4|5|6|7|8|9|0 { - if <def[lorevalue].contains[%value%] { - define foundvalue %value% - foreach stop } }
  
  #MCMONKEY je reko o lore:
  #element.replace[regex:[^0-9]+]
  
  
  #TALAMAR1 AL KAJ JE ŽE:
  # TESTTASKLORE:
  # type: task
  # script:
  # - foreach <player.item_in_hand.lore.get_args[5]> {  
    # - define lorevalue %value%
    # - foreach li@1|2|3|4|5|6|7|8|9|0 {
      # - if <def[lorevalue].contains[%value%]> {
        # - define foundvalue %value%
        # - narrate %foundvalue%
        # - foreach stop
        # }
      # }
    # }

#################################################################################################
#                                                                                               #
#                                       SERVER JANITOR                                          #
#                                                                                               #
#################################################################################################  
#################################################################################################
#                                      TEXT FORMATS                                             #
#################################################################################################      
npcf: 
  type: format 
  format: "<npc.name>: <green><&dq><text><&dq>"

youf:
  type: format
  format: "You -> <npc.name>: <yellow><&dq><text><&dq>"
    
#################################################################################################
#                                      STARTUP STUFF                                            #
#################################################################################################
StartupMaintenance:
  type: world
  events:
    on server start:
    - wait 3s
    - execute as_server "hd reload"
    - while true
    {
      - execute as_server "denizen save"
      - wait 5m
    }
    
#################################################################################################
#                                      DAILY MANA                                               #
#################################################################################################    
DailyMana:
  type: world
  events:
    on player joins:
    - while true
    {
      - run DailyManaTask
      - wait 30m
    }
    
DailyManaTask:
  type: task
  script:
  - if <player.has_flag[daily_mana_cooldown]> { - queue clear }
  else
  {
    - wait 3
    - give money qty:10
    - narrate "<aqua>You were given <green>10 mana<aqua> for logging on today!"
    - flag player daily_mana_cooldown duration:20h
  }